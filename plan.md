# 項目開發計劃：AI 驅動的文本轉 Mermaid 圖表 Web 應用

## 1. 項目初始化與環境設置

- [x] 初始化 Next.js 15 項目
- [ ] 配置 Tailwind CSS 和 Shadcn UI
- [ ] 設置環境變量 (.env.local) 用於 AI API 配置
- [ ] 配置項目目錄結構

## 2. 核心功能開發

### 2.1 基礎UI佈局

- [ ] 創建基礎佈局組件 (layout.tsx)
- [ ] 實現響應式佈局設計
- [ ] 添加主題切換功能 (暗/亮模式)
- [ ] 實現主頁面結構 (文本輸入區、圖表展示區、編輯區)

### 2.2 文本輸入與處理功能

- [ ] 實現文本編輯器組件
- [ ] 添加文件上傳功能，支持 .txt, .md, .docx 文件
- [ ] 實現文件解析與文本提取
- [ ] 添加字數統計和字數限制功能 (20,000字數)
- [ ] 實現文本預處理函數

### 2.3 AI 文本轉 Mermaid 代碼實現

- [ ] 創建 AI API 服務封裝
- [ ] 設計 Prompt 模板，針對不同圖表類型
- [ ] 實現與 AI 模型的通信邏輯
- [ ] 實現錯誤處理與請求狀態管理
- [ ] 添加生成類型選擇功能 (流程圖、序列圖等)

### 2.4 Mermaid 代碼編輯與渲染

- [ ] 添加代碼編輯器組件
- [ ] 集成 Excalidraw 組件
- [ ] 實現 mermaid-to-excalidraw 轉換
- [ ] 實現實時渲染功能
- [ ] 添加圖表交互功能 (拖拽、縮放等)

### 2.5 用户交互功能

- [ ] 添加"生成圖表"按鈕及loading狀態
- [ ] 實現"複製代碼"功能
- [ ] 實現"導出圖表"功能 (PNG, SVG)
- [ ] 添加錯誤提示與用户反饋組件

## 3. 性能優化與用户體驗提升

- [ ] 實現懶加載和動態導入
- [ ] 優化大文件處理邏輯
- [ ] 添加緩存策略
- [ ] 添加加載狀態和反饋動畫
- [ ] 進行響應式測試與優化

## 4. 測試與部署

- [ ] 編寫單元測試
- [ ] 進行功能測試與UI測試
- [ ] 部署應用
- [ ] 性能監控與分析

## 5. 文檔與維護

- [ ] 編寫用户使用文檔
- [ ] 編寫開發文檔
- [ ] 代碼優化與重構

## 開發排期

1. **階段一** (基礎架構與UI): 1天
   - 項目初始化與環境設置
   - 基礎UI佈局實現
   - 主題切換功能

2. **階段二** (核心功能開發): 2天
   - 文本輸入與處理功能
   - AI 文本轉 Mermaid 代碼實現
   - Mermaid 代碼編輯與渲染

3. **階段三** (用户體驗優化): 1天
   - 用户交互功能完善
   - 性能優化
   - 錯誤處理改進

4. **階段四** (測試與部署): 1天
   - 測試
   - 部署
   - 文檔編寫

## 技術棧確認

- **前端框架**: Next.js 15 (App Router)
- **UI組件庫**: shadcn/ui
- **CSS框架**: Tailwind CSS
- **渲染工具**: 
  - Excalidraw (@excalidraw/excalidraw)
  - mermaid-to-excalidraw (@excalidraw/mermaid-to-excalidraw)
- **文件處理**: 
  - mammoth (處理.docx文件)
- **API集成**: OpenAI兼容模式 